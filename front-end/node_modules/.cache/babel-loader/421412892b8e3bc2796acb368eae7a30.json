{"ast":null,"code":"import _objectSpread from \"/Users/flatironstudent/Desktop/Joseph/Module4/uno/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/flatironstudent/Desktop/Joseph/Module4/uno/front-end/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./Components/NavBar\";\nimport UserNavBar from \"./Components/UserNavBar\";\nimport WaitNavBar from \"./Components/WaitNavBar\";\nimport PlayNavBar from \"./Components/PlayNavBar\";\nimport UserHome from \"./Components/UserHome\";\nimport LogIn from \"./Components/LogIn\";\nimport SignUp from \"./Components/SignUp\";\nimport CreateGame from \"./Components/CreateGame\";\nimport JoinGame from \"./Components/JoinGame\";\nimport Waiting from \"./Components/Waiting\";\nimport GameScreen from \"./Components/GameScreen\";\nimport { io } from \"./Socket\";\nconst URLBase = 'http://10.185.2.163:3001';\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loggedInUser: null,\n      showPage: \"logIn\",\n      showUserPage: \"home\",\n      currentGame: {},\n      creator: {},\n      players: []\n    };\n\n    this.setLoggedInUser = user => {\n      this.setState({\n        loggedInUser: user,\n        showPage: \"user\"\n      });\n    };\n\n    this.handleLogOut = e => {\n      localStorage.clear();\n      this.setState({\n        loggedInUser: null,\n        showPage: \"logIn\",\n        userShowPage: \"home\"\n      });\n    };\n\n    this.handleHome = () => {\n      this.setState({\n        showUserPage: \"home\"\n      });\n    };\n\n    this.handleSignUp = () => {\n      this.setState({\n        showPage: \"signUp\"\n      });\n    };\n\n    this.handleUno = () => {\n      this.setState({\n        showPage: \"logIn\"\n      });\n    };\n\n    this.handleCreateGame = () => {\n      this.setState({\n        showUserPage: \"create\"\n      });\n    };\n\n    this.handleJoinGame = () => {\n      this.setState({\n        showUserPage: \"join\"\n      });\n    };\n\n    this.handleDeleteGame = () => {\n      this.setState({\n        showUserPage: \"delete\"\n      });\n    };\n\n    this.handleCreateSubmit = game => {\n      io.emit(\"game.create\", _objectSpread({}, game, {\n        creator_id: this.state.loggedInUser.id,\n        users: JSON.stringify([])\n      }));\n      this.setState({\n        showUserPage: \"waiting\",\n        currentGame: _objectSpread({}, game, {\n          creator_id: this.state.loggedInUser.id,\n          users: JSON.stringify([])\n        })\n      });\n    };\n\n    this.handleJoinSubmit = game => {\n      this.setState({\n        showUserPage: \"waiting\",\n        currentGame: _objectSpread({}, game, {\n          users: JSON.stringify([...JSON.parse(game.users), this.state.loggedInUser.id])\n        })\n      });\n      io.emit(\"game.join\", _objectSpread({}, game, {\n        users: JSON.stringify([...JSON.parse(game.users), this.state.loggedInUser.id])\n      }));\n    };\n\n    this.handleLeave = game => {\n      if (game.creator_id == this.state.loggedInUser.id) {\n        console.log(\"creator left game\");\n        this.setState({\n          showUserPage: \"home\"\n        });\n        io.emit(\"game.delete\", game);\n      } else {\n        console.log(\"player left game\");\n        this.setState({\n          showUserPage: \"home\"\n        });\n        io.emit(\"game.leave\", {\n          game: game,\n          user_id: this.state.loggedInUser.id\n        });\n      }\n    };\n\n    this.handleStart = (game, players) => {\n      this.setState({\n        currentGame: game\n      });\n      io.emit(\"game.start\", players);\n    };\n\n    this.getCreator = id => {\n      io.emit(\"creator.get\", id);\n      io.on(\"creator.send\", creator => {\n        this.setState({\n          creator: creator\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    io.on(\"game.started\", players => {\n      this.setState({\n        players: players,\n        showUserPage: \"play\"\n      });\n    });\n    fetch(`${URLBase}/user`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    }).then(res => res.json()).then(auth => {\n      if (!auth.error) {\n        if (auth.user) {\n          return this.setState({\n            loggedInUser: auth.user,\n            showPage: \"user\"\n          });\n        } else {\n          this.setState({\n            loggedInUser: auth,\n            showPage: \"user\"\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    window.app = this;\n\n    if (this.state.showPage === \"logIn\") {\n      return React.createElement(\"div\", {\n        style: {\n          background: \"black\",\n          height: \"1000vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(LogIn, {\n        setLoggedInUser: this.setLoggedInUser,\n        handleSignUp: this.handleSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }));\n    }\n\n    if (this.state.showPage === \"signUp\") {\n      return React.createElement(\"div\", {\n        style: {\n          background: \"black\",\n          height: \"1000vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        handleUno: this.handleUno,\n        handleLeave: this.handleLeave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }), React.createElement(SignUp, {\n        setLoggedInUser: this.setLoggedInUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }));\n    }\n\n    if (this.state.showPage === \"user\") {\n      if (this.state.showUserPage === \"home\") {\n        return React.createElement(\"div\", {\n          style: {\n            background: \"black\",\n            height: \"100vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, React.createElement(UserNavBar, {\n          user: this.state.loggedInUser,\n          handleLogOut: this.handleLogOut,\n          handleHome: this.handleHome,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }), React.createElement(UserHome, {\n          user: this.state.loggedInUser,\n          handleCreateGame: this.handleCreateGame,\n          handleJoinGame: this.handleJoinGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }));\n      }\n\n      if (this.state.showUserPage === \"create\") {\n        return React.createElement(\"div\", {\n          style: {\n            background: \"black\",\n            height: \"100vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(UserNavBar, {\n          user: this.state.loggedInUser,\n          handleLogOut: this.handleLogOut,\n          handleHome: this.handleHome,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }), React.createElement(CreateGame, {\n          user: this.state.loggedInUser,\n          handleCreateSubmit: this.handleCreateSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }));\n      }\n\n      if (this.state.showUserPage === \"join\") {\n        return React.createElement(\"div\", {\n          style: {\n            background: \"black\",\n            height: \"100vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(UserNavBar, {\n          user: this.state.loggedInUser,\n          handleLogOut: this.handleLogOut,\n          handleHome: this.handleHome,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }), React.createElement(JoinGame, {\n          user: this.state.loggedInUser,\n          handleJoinSubmit: this.handleJoinSubmit,\n          handleCreateGame: this.handleCreateGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }));\n      }\n\n      if (this.state.showUserPage === \"waiting\") {\n        return React.createElement(\"div\", {\n          style: {\n            background: \"black\",\n            height: \"100vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, React.createElement(WaitNavBar, {\n          user: this.state.loggedInUser,\n          handleLogOut: this.handleLogOut,\n          handleHome: this.handleHome,\n          handleLeave: this.handleLeave,\n          game: this.state.currentGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }), React.createElement(Waiting, {\n          user: this.state.loggedInUser,\n          handleLeave: this.handleLeave,\n          handleHome: this.handleHome,\n          game: this.state.currentGame,\n          handleStart: this.handleStart,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }));\n      }\n\n      if (this.state.showUserPage === \"play\") {\n        return React.createElement(\"div\", {\n          style: {\n            background: \"black\",\n            height: \"100vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, React.createElement(PlayNavBar, {\n          game: this.state.currentGame,\n          user: this.state.loggedInUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }), React.createElement(GameScreen, {\n          creator: this.state.creator,\n          players: this.state.players,\n          user: this.state.loggedInUser,\n          game: this.state.currentGame,\n          getCreator: this.getCreator,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }));\n      }\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/flatironstudent/Desktop/Joseph/Module4/uno/front-end/src/App.js"],"names":["React","Component","NavBar","UserNavBar","WaitNavBar","PlayNavBar","UserHome","LogIn","SignUp","CreateGame","JoinGame","Waiting","GameScreen","io","URLBase","App","state","loggedInUser","showPage","showUserPage","currentGame","creator","players","setLoggedInUser","user","setState","handleLogOut","e","localStorage","clear","userShowPage","handleHome","handleSignUp","handleUno","handleCreateGame","handleJoinGame","handleDeleteGame","handleCreateSubmit","game","emit","creator_id","id","users","JSON","stringify","handleJoinSubmit","parse","handleLeave","console","log","user_id","handleStart","getCreator","on","componentDidMount","fetch","headers","Authorization","token","then","res","json","auth","error","render","window","app","background","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./Components/NavBar\";\nimport UserNavBar from \"./Components/UserNavBar\";\nimport WaitNavBar from \"./Components/WaitNavBar\";\nimport PlayNavBar from \"./Components/PlayNavBar\";\nimport UserHome from \"./Components/UserHome\";\nimport LogIn from \"./Components/LogIn\";\nimport SignUp from \"./Components/SignUp\";\nimport CreateGame from \"./Components/CreateGame\";\nimport JoinGame from \"./Components/JoinGame\";\nimport Waiting from \"./Components/Waiting\";\nimport GameScreen from \"./Components/GameScreen\";\nimport { io } from \"./Socket\";\nconst URLBase = 'http://10.185.2.163:3001'\n\nexport default class App extends Component {\n  state = {\n    loggedInUser: null,\n    showPage: \"logIn\",\n    showUserPage: \"home\",\n    currentGame: {},\n    creator: {},\n    players: []\n  };\n\n  componentDidMount() {\n    io.on(\"game.started\", players => {\n      this.setState({\n        players: players,\n        showUserPage: \"play\"\n      });\n    });\n    fetch(`${URLBase}/user`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    })\n      .then(res => res.json())\n      .then(auth => {\n        if (!auth.error) {\n          if (auth.user) {\n            return this.setState({\n              loggedInUser: auth.user,\n              showPage: \"user\"\n            });\n          } else {\n            this.setState({\n              loggedInUser: auth,\n              showPage: \"user\"\n            });\n          }\n        }\n      });\n  }\n\n  setLoggedInUser = user => {\n    this.setState({ loggedInUser: user, showPage: \"user\" });\n  };\n\n  handleLogOut = e => {\n    localStorage.clear();\n    this.setState({\n      loggedInUser: null,\n      showPage: \"logIn\",\n      userShowPage: \"home\"\n    });\n  };\n\n  handleHome = () => {\n    this.setState({ showUserPage: \"home\" });\n  };\n\n  handleSignUp = () => {\n    this.setState({ showPage: \"signUp\" });\n  };\n\n  handleUno = () => {\n    this.setState({ showPage: \"logIn\" });\n  };\n\n  handleCreateGame = () => {\n    this.setState({ showUserPage: \"create\" });\n  };\n\n  handleJoinGame = () => {\n    this.setState({ showUserPage: \"join\" });\n  };\n\n  handleDeleteGame = () => {\n    this.setState({ showUserPage: \"delete\" });\n  };\n\n  handleCreateSubmit = game => {\n    io.emit(\"game.create\", {\n      ...game,\n      creator_id: this.state.loggedInUser.id,\n      users: JSON.stringify([])\n    });\n    this.setState({\n      showUserPage: \"waiting\",\n      currentGame: {\n        ...game,\n        creator_id: this.state.loggedInUser.id,\n        users: JSON.stringify([])\n      }\n    });\n  };\n\n  handleJoinSubmit = game => {\n    this.setState({\n      showUserPage: \"waiting\",\n      currentGame: {\n        ...game,\n        users: JSON.stringify([\n          ...JSON.parse(game.users),\n          this.state.loggedInUser.id\n        ])\n      }\n    });\n    io.emit(\"game.join\", {\n      ...game,\n      users: JSON.stringify([\n        ...JSON.parse(game.users),\n        this.state.loggedInUser.id\n      ])\n    });\n  };\n\n  handleLeave = game => {\n    if (game.creator_id == this.state.loggedInUser.id) {\n      console.log(\"creator left game\");\n      this.setState({ showUserPage: \"home\" });\n      io.emit(\"game.delete\", game);\n    } else {\n      console.log(\"player left game\");\n      this.setState({ showUserPage: \"home\" });\n      io.emit(\"game.leave\", {\n        game: game,\n        user_id: this.state.loggedInUser.id\n      });\n    }\n  };\n\n  handleStart = (game, players) => {\n    this.setState({ currentGame: game });\n    io.emit(\"game.start\", players);\n  };\n\n  getCreator = id => {\n    io.emit(\"creator.get\", id);\n    io.on(\"creator.send\", creator => {\n      this.setState({\n        creator: creator\n      });\n    });\n  };\n\n  render() {\n    window.app = this;\n    if (this.state.showPage === \"logIn\") {\n      return (\n        <div style={{ background: \"black\", height: \"1000vh\" }}>\n          <NavBar />\n          <LogIn\n            setLoggedInUser={this.setLoggedInUser}\n            handleSignUp={this.handleSignUp}\n          />\n        </div>\n      );\n    }\n    if (this.state.showPage === \"signUp\") {\n      return (\n        <div style={{ background: \"black\", height: \"1000vh\" }}>\n          <NavBar handleUno={this.handleUno} handleLeave={this.handleLeave} />\n          <SignUp setLoggedInUser={this.setLoggedInUser} />\n        </div>\n      );\n    }\n    if (this.state.showPage === \"user\") {\n      if (this.state.showUserPage === \"home\") {\n        return (\n          <div style={{ background: \"black\", height: \"100vh\" }}>\n            <UserNavBar\n              user={this.state.loggedInUser}\n              handleLogOut={this.handleLogOut}\n              handleHome={this.handleHome}\n            />\n            <UserHome\n              user={this.state.loggedInUser}\n              handleCreateGame={this.handleCreateGame}\n              handleJoinGame={this.handleJoinGame}\n            />\n          </div>\n        );\n      }\n      if (this.state.showUserPage === \"create\") {\n        return (\n          <div style={{ background: \"black\", height: \"100vh\" }}>\n            <UserNavBar\n              user={this.state.loggedInUser}\n              handleLogOut={this.handleLogOut}\n              handleHome={this.handleHome}\n            />\n            <CreateGame\n              user={this.state.loggedInUser}\n              handleCreateSubmit={this.handleCreateSubmit}\n            />\n          </div>\n        );\n      }\n      if (this.state.showUserPage === \"join\") {\n        return (\n          <div style={{ background: \"black\", height: \"100vh\" }}>\n            <UserNavBar\n              user={this.state.loggedInUser}\n              handleLogOut={this.handleLogOut}\n              handleHome={this.handleHome}\n            />\n            <JoinGame\n              user={this.state.loggedInUser}\n              handleJoinSubmit={this.handleJoinSubmit}\n              handleCreateGame={this.handleCreateGame}\n            />\n          </div>\n        );\n      }\n      if (this.state.showUserPage === \"waiting\") {\n        return (\n          <div style={{ background: \"black\", height: \"100vh\" }}>\n            <WaitNavBar\n              user={this.state.loggedInUser}\n              handleLogOut={this.handleLogOut}\n              handleHome={this.handleHome}\n              handleLeave={this.handleLeave}\n              game={this.state.currentGame}\n            />\n            <Waiting\n              user={this.state.loggedInUser}\n              handleLeave={this.handleLeave}\n              handleHome={this.handleHome}\n              game={this.state.currentGame}\n              handleStart={this.handleStart}\n            />\n          </div>\n        );\n      }\n      if (this.state.showUserPage === \"play\") {\n        return (\n          <div style={{ background: \"black\", height: \"100vh\" }}>\n            <PlayNavBar \n              game={this.state.currentGame}\n              user={this.state.loggedInUser}\n            />\n            <GameScreen\n              creator={this.state.creator}\n              players={this.state.players}\n              user={this.state.loggedInUser}\n              game={this.state.currentGame}\n              getCreator={this.getCreator}\n            />\n          </div>\n        );\n      }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}